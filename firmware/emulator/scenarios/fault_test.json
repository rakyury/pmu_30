{
    "name": "Fault Injection Test",
    "description": "Tests protection system response to various fault conditions",
    "version": "1.0",

    "test_sequence": [
        {
            "time_ms": 0,
            "action": "set_voltage",
            "value": 12000,
            "description": "Start with normal voltage"
        },
        {
            "time_ms": 1000,
            "action": "set_voltage",
            "value": 9000,
            "description": "Drop to 9V (low warning)"
        },
        {
            "time_ms": 2000,
            "action": "set_voltage",
            "value": 5000,
            "description": "Drop to 5V (undervoltage fault)"
        },
        {
            "time_ms": 3000,
            "action": "set_voltage",
            "value": 12000,
            "description": "Restore to 12V"
        },
        {
            "time_ms": 4000,
            "action": "set_voltage",
            "value": 16000,
            "description": "Raise to 16V (high warning)"
        },
        {
            "time_ms": 5000,
            "action": "set_voltage",
            "value": 24000,
            "description": "Raise to 24V (overvoltage fault)"
        },
        {
            "time_ms": 6000,
            "action": "set_temperature",
            "value": 110,
            "description": "Set overtemperature warning"
        },
        {
            "time_ms": 7000,
            "action": "set_temperature",
            "value": 130,
            "description": "Set overtemperature critical"
        },
        {
            "time_ms": 8000,
            "action": "inject_profet_fault",
            "channel": 0,
            "flags": "0x01",
            "description": "Inject overcurrent on PROFET 0"
        },
        {
            "time_ms": 9000,
            "action": "clear_faults",
            "description": "Clear all faults"
        }
    ],

    "voltage_mV": 12000,
    "temperature_C": 25,

    "adc": [512, 512, 512, 512, 512, 512, 512, 512, 512, 512,
            512, 512, 512, 512, 512, 512, 512, 512, 512, 512],

    "comments": [
        "This scenario tests fault detection and recovery",
        "Run with: ./pmu30_emulator --scenario fault_test.json",
        "Monitor protection system response to each fault"
    ]
}
