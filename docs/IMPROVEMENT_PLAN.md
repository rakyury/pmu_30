# –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π PMU-30 (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ ECUMaster PMU24-DL)

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

| –§—É–Ω–∫—Ü–∏—è | ECUMaster PMU24-DL | PMU-30 (—Ç–µ–∫—É—â–µ–µ) | –°—Ç–∞—Ç—É—Å |
|---------|-------------------|------------------|--------|
| High-side outputs | 24 (10x25A, 6x15A, 8x7A) | 30 (PROFET) | ‚úÖ –õ—É—á—à–µ |
| Analog inputs | 16 (+8 dual-use) | 20 | ‚úÖ –ï—Å—Ç—å |
| CAN buses | 2x CAN 2.0 A/B | 4x CAN | ‚úÖ –õ—É—á—à–µ |
| Data logging | 256 MB, 500 Hz | –ï—Å—Ç—å (pmu_datalog) | ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å |
| Logic functions | –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä | –ï—Å—Ç—å (pmu_logic) | ‚ö†Ô∏è –†–∞—Å—à–∏—Ä–∏—Ç—å |
| PID controller | –î–∞ | –ï—Å—Ç—å (pmu_pid) | ‚úÖ –ï—Å—Ç—å |
| Tables 2D/3D | –î–∞ | –ï—Å—Ç—å | ‚úÖ –ï—Å—Ç—å |
| Timers | –î–∞ | –ï—Å—Ç—å (pmu_timer) | ‚úÖ –ï—Å—Ç—å |
| Button modes | Toggle, Latch, etc. | –ï—Å—Ç—å | ‚úÖ –ï—Å—Ç—å |
| 3D Accelerometer | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π | ‚ùå –ù–µ—Ç | üî¥ –î–æ–±–∞–≤–∏—Ç—å |
| Gyroscope | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π | ‚ùå –ù–µ—Ç | üî¥ –î–æ–±–∞–≤–∏—Ç—å |
| Inertia switch | –ê–≤–∞—Ä–∏–π–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ | ‚ùå –ù–µ—Ç | üî¥ –î–æ–±–∞–≤–∏—Ç—å |
| Real-time clock | –î–ª—è timestamps | ‚ùå –ù–µ—Ç | üî¥ –î–æ–±–∞–≤–∏—Ç—å |
| Tricolor LEDs | 24 (–Ω–∞ –≤—ã—Ö–æ–¥) | ‚ùå –ù–µ—Ç | üü° –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| H-Bridge | –ù–µ—Ç | 4x | ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
| LIN bus | –ù–µ—Ç | –ï—Å—Ç—å | ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
| Lua scripting | –ù–µ—Ç | –ï—Å—Ç—å | ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
| WiFi/Bluetooth | –ù–µ—Ç | –ï—Å—Ç—å | ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (Hardware)

### 1.1 –î–∞—Ç—á–∏–∫ IMU (3D Accelerometer + Gyroscope)
**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ**: ECUMaster –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –∞–≤–∞—Ä–∏–π –∏ –∏–Ω–µ—Ä—Ü–∏–æ–Ω–Ω–æ–≥–æ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —á–∏–ø**: LSM6DSO32 –∏–ª–∏ ICM-42688-P
- 6-DoF (3-axis accel + 3-axis gyro)
- SPI/I2C –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- Automotive grade –æ–ø—Ü–∏–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
```c
typedef struct {
    float accel_x, accel_y, accel_z;  // m/s¬≤
    float gyro_x, gyro_y, gyro_z;     // ¬∞/s
    float impact_g;                    // –†–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ
    bool crash_detected;               // –§–ª–∞–≥ –∞–≤–∞—Ä–∏–∏
} PMU_IMU_Data_t;
```

### 1.2 Inertia Switch (–ê–≤–∞—Ä–∏–π–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ)
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–ø–ª–∏–≤–Ω–æ–≥–æ –Ω–∞—Å–æ—Å–∞ –ø—Ä–∏ —É–¥–∞—Ä–µ
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–π –ø–æ—Ä–æ–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3G)
- –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è
- CAN —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

```c
typedef struct {
    float threshold_g;           // –ü–æ—Ä–æ–≥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è (G)
    uint16_t hold_time_ms;       // –í—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è
    uint16_t outputs_to_disable; // –ë–∏—Ç–æ–≤–∞—è –º–∞—Å–∫–∞ –≤—ã—Ö–æ–¥–æ–≤
    bool auto_reset;             // –ê–≤—Ç–æ-—Å–±—Ä–æ—Å –ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞
    uint16_t reset_delay_ms;     // –ó–∞–¥–µ—Ä–∂–∫–∞ —Å–±—Ä–æ—Å–∞
} PMU_InertiaSwitch_Config_t;
```

### 1.3 Real-Time Clock (RTC)
**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ**: Timestamps –¥–ª—è data logging, scheduled events.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —á–∏–ø**: DS3231 (I2C) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π RTC STM32H7

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- Timestamps –¥–ª—è –ª–æ–≥–æ–≤
- Scheduled tasks (–∑–∞–ø—É—Å–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–∏)
- Session tracking

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Firmware —É–ª—É—á—à–µ–Ω–∏—è

### 2.1 –£–ª—É—á—à–µ–Ω–∏–µ Data Logging
**–¢–µ–∫—É—â–µ–µ**: –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ pmu_datalog.c

**–£–ª—É—á—à–µ–Ω–∏—è**:
- [ ] –£–≤–µ–ª–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ 500 Hz (–∫–∞–∫ —É ECUMaster)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π
- [ ] Session management —Å RTC timestamps
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –¢—Ä–∏–≥–≥–µ—Ä—ã –∑–∞–ø–∏—Å–∏ (–ø–æ —É—Å–ª–æ–≤–∏—é)

```c
typedef struct {
    uint16_t sample_rate_hz;     // 1-500 Hz
    uint32_t buffer_size_mb;     // –†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞
    uint16_t channel_mask[4];    // –ö–∞–∫–∏–µ –∫–∞–Ω–∞–ª—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å
    PMU_LogTrigger_t trigger;    // –£—Å–ª–æ–≤–∏–µ –∑–∞–ø–∏—Å–∏
    bool circular_mode;          // –ö–æ–ª—å—Ü–µ–≤–æ–π —Ä–µ–∂–∏–º
} PMU_DataLog_Config_t;
```

### 2.2 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Logic Functions
**–î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ (–∫–∞–∫ —É ECUMaster)**:
- [ ] `LOGIC_BITWISE_AND` - –ø–æ–±–∏—Ç–æ–≤–æ–µ –ò
- [ ] `LOGIC_BITWISE_OR` - –ø–æ–±–∏—Ç–æ–≤–æ–µ –ò–õ–ò
- [ ] `LOGIC_SHIFT_LEFT/RIGHT` - —Å–¥–≤–∏–≥–∏
- [ ] `LOGIC_COUNTER` - —Å—á—ë—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π
- [ ] `LOGIC_ONESHOT` - –æ–¥–∏–Ω–æ—á–Ω—ã–π –∏–º–ø—É–ª—å—Å
- [ ] `LOGIC_DELAY_ON/OFF` - –∑–∞–¥–µ—Ä–∂–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è
- [ ] `LOGIC_RAMP` - –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
- [ ] `LOGIC_SEQUENCE` - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–π

### 2.3 CAN Stream —É–ª—É—á—à–µ–Ω–∏—è
**–î–æ–±–∞–≤–∏—Ç—å**:
- [ ] Auto-save channels (–∫–∞–∫ —É ECUMaster) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ CAN –¥–∞–Ω–Ω—ã—Ö
- [ ] Compound messages –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- [ ] CAN FD support (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)
- [ ] –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è ISO 15765 (UDS)

### 2.4 Output Protection —É–ª—É—á—à–µ–Ω–∏—è
**–î–æ–±–∞–≤–∏—Ç—å (–∫–∞–∫ —É ECUMaster)**:
- [ ] Automatic retry —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º backoff
- [ ] Fallback outputs (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≤—ã—Ö–æ–¥ –ø—Ä–∏ –æ—à–∏–±–∫–µ)
- [ ] Current derating –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä–µ–≤–µ
- [ ] Short-to-ground vs Short-to-battery –¥–µ—Ç–µ–∫—Ü–∏—è

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: Configurator —É–ª—É—á—à–µ–Ω–∏—è

### 3.1 –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å–≤—è–∑–µ–π (node editor)
- [ ] Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤ (–∫–∞–∫ ECUMaster PMU Tool)
- [ ] –û—Å—Ü–∏–ª–ª–æ–≥—Ä–∞—Ñ –¥–ª—è –∞–Ω–∞–ª–æ–≥–æ–≤—ã—Ö –≤—Ö–æ–¥–æ–≤
- [ ] –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ —Ç–æ–∫–æ–≤ –≤—ã—Ö–æ–¥–æ–≤

### 3.2 –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- [ ] Live fault codes —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- [ ] –ò—Å—Ç–æ—Ä–∏—è –æ—à–∏–±–æ–∫ —Å timestamps
- [ ] Export –ª–æ–≥–æ–≤ –≤ CSV/MAT —Ñ–æ—Ä–º–∞—Ç—ã

### 3.3 –®–∞–±–ª–æ–Ω—ã
- [ ] Preset configurations –¥–ª—è —Ç–∏–ø–æ–≤—ã—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π:
  - Rally car
  - Drift car
  - Time attack
  - Drag racing
  - Endurance racing

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 4.1 GPS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- Lap timing
- Speed-based functions
- Geo-fencing

### 4.2 Telemetry (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- WiFi streaming –¥–∞–Ω–Ω—ã—Ö
- Remote monitoring —á–µ—Ä–µ–∑ Bluetooth
- Cloud sync (—á–µ—Ä–µ–∑ WiFi)

### 4.3 OBD-II Gateway
- –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ ECU —á–µ—Ä–µ–∑ OBD
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ OBD‚ÜíCAN –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞

---

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1 (1-2 –º–µ—Å—è—Ü–∞): Core improvements
1. RTC –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
2. Data logging —É–ª—É—á—à–µ–Ω–∏—è
3. Logic functions —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –§–∞–∑–∞ 2 (2-3 –º–µ—Å—è—Ü–∞): Hardware additions
1. IMU –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—Ç—Ä–µ–±—É–µ—Ç HW rev)
2. Inertia switch
3. CAN FD –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### –§–∞–∑–∞ 3 (3-4 –º–µ—Å—è—Ü–∞): Configurator
1. Node-based logic editor
2. Advanced diagnostics
3. Preset templates

---

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏

- [ECUMaster PMU24-DL Official Page](https://www.ecumaster.com/products/pmu24/)
- [ECUMaster PMU Manual (PDF)](https://www.ecumaster.com/files/PMU/PMU_Manual.pdf)
- [ECUMaster USA - PMU24-DL](https://ecumasterusa.com/products/ecumaster-pmu24-dl-power-management-unit)
